{# SPDX-FileCopyrightText: 2025 JWP Consulting GK #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}
{% extends "workspace/form_base.html" %}
{% load i18n %}
{% load projectify %}
{% block form_title %}
    {% translate "Update Section" %}
{% endblock form_title %}
{% block form_content %}
    <form action="{% url 'dashboard:sections:update' section.uuid %}"
          method="post"
          class="min-w-0 grow"
          role="presentation">
        {{ form.errors }}
        <div class="flex h-full flex-col gap-8 p-4 pt-0">
            <div class="flex flex-col gap-8">
                <div class="flex flex-col gap-6">
                    {{ form.title.as_field_group }}
                    {{ form.description.as_field_group }}
                    {% include "projectify/forms/submit.html" with text=_("Update section") %}
                </div>
                <div class="flex flex-col gap-4">
                    <h2 class="font-bold text-xl">{% translate "Section actions" %}</h2>
                    <div class="flex flex-col items-start gap-2">
                        <h3 class="font-bold text-lg">{% translate "Move section" %}</h3>
                        {% action_button text=_("Move up") icon="chevron-up" style="secondary" name="action" value="move_up" %}
                        {% action_button text=_("Move down") icon="chevron-down" style="secondary" name="action" value="move_down" %}
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">{% translate "Delete section" %}</h3>
                        <form hx-post="{% url 'dashboard:sections:delete' section_uuid=section.uuid %}"
                              hx-confirm="{% translate "Are you sure you want to delete this section?" %}">
                            {% action_button text=_("Delete this section") icon="trash" style="destructive" %}
                        </form>
                    </div>
                </div>
            </div>
            {% url 'dashboard:projects:detail' section.project.uuid as back_url %}
            {% anchor href=back_url label=_("Go back to project") %}
        </div>
        {% csrf_token %}
    </form>
{% endblock form_content %}
