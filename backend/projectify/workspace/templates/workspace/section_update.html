{# SPDX-FileCopyrightText: 2025 JWP Consulting GK #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}
{% extends "workspace/form_base.html" %}
{% load i18n %}
{% load projectify %}
{% block form_title %}
    {% translate "Update Section" %}
{% endblock form_title %}
{% block form_content %}
    <form action="{% url 'dashboard:sections:update' section.uuid %}"
          method="post"
          class="min-w-0 grow"
          role="presentation">
        {{ form.errors }}
        <div class="flex h-full flex-col p-4 pt-0">
            <div class="flex flex-col gap-8">
                <div class="flex flex-col gap-6">
                    {{ form.title.as_field_group }}
                    {{ form.description.as_field_group }}
                    <button type="submit"
                            name="action"
                            value="save"
                            class="w-full bg-primary text-primary-content hover:bg-primary-hover active:bg-primary-pressed text-base flex min-w-max flex-row justify-center gap-2 rounded-lg px-4 py-2 font-bold disabled:bg-disabled disabled:text-disabled-primary-content">
                        {% trans "Update section" %}
                    </button>
                    {% url 'dashboard:projects:detail' section.project.uuid as back_url %}
                    {% anchor href=back_url label=_("Go back") %}
                </div>
                {% csrf_token %}
            </div>
        </div>
    </form>
    <h2>{% translate "Section Actions" %}</h2>
    <div class="flex flex-col gap-4">
        <div>
            <h3>{% translate "Move Section" %}</h3>
            <div class="flex gap-2">
                <form method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit" name="action" value="move_up">{% translate "Move Up" %}</button>
                </form>
                <form method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit" name="action" value="move_down">{% translate "Move Down" %}</button>
                </form>
            </div>
        </div>
        <form hx-post="{% url 'dashboard:sections:delete' section_uuid=section.uuid %}"
              method="post"
              class="inline"
              hx-confirm="{% translate "Are you sure you want to delete this section?" %}">
            <h3>{% translate "Delete Section" %}</h3>
            {% csrf_token %}
            <input type="submit" value="{% translate "Delete section" %}">
        </form>
    </div>
{% endblock form_content %}
