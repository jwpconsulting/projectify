{# SPDX-FileCopyrightText: 2025-2026 JWP Consulting GK #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}
{% extends "workspace/form_base.html" %}
{% load i18n %}
{% load projectify %}
{% block form_title %}
    {% translate "Update Section" %}
{% endblock form_title %}
{% block form_content %}
    <main id="main" class="min-w-0 grow">
        <div class="flex h-full flex-col gap-8 p-4 pt-0">
            <form class="flex flex-col gap-8"
                  action="{% url 'dashboard:sections:update' section.uuid %}"
                  method="post"
                  aria-label="{% translate "Update section" %}">
                {% csrf_token %}
                {{ form.errors }}
                <div class="flex flex-col gap-6">
                    {{ form.title.as_field_group }}
                    {{ form.description.as_field_group }}
                    {% include "projectify/forms/submit.html" with name="action" value="save" text=_("Update section") %}
                </div>
                <div class="flex flex-col gap-4">
                    <h2 class="font-bold text-xl">{% translate "Section actions" %}</h2>
                    <div class="flex flex-col items-start gap-2">
                        <h3 class="font-bold text-lg">{% translate "Move section" %}</h3>
                        {% action_button text=_("Move up") icon="chevron-up" style="secondary" name="action" value="move_up" %}
                        {% action_button text=_("Move down") icon="chevron-down" style="secondary" name="action" value="move_down" %}
                    </div>
                </div>
            </form>
            {% anchor href='dashboard:projects:detail' label=_("Go back to project") %}
            <form hx-post="{% url 'dashboard:sections:delete' section_uuid=section.uuid %}"
                  hx-confirm="{% translate "Are you sure you want to delete this section?" %}"
                  aria-label="{% translate "Delete section" %}">
                {% csrf_token %}
                <h3 class="font-bold text-lg">{% translate "Delete section" %}</h3>
                {% action_button text=_("Delete this section") icon="trash" style="destructive" %}
            </form>
        </div>
    </main>
{% endblock form_content %}
